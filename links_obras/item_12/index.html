<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PILATES - Paulo Canuto</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Playfair+Display:wght@400;700&family=Oswald:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://datacanuto.github.io/galeria-digital-artes/assets/css/style.css" />
</head>

<body>
    <div class=" container ">
        <div class="artwork-image-container ">
            <img src="../../assets/img/REF 12-PILATES.jpg " alt="PILATES " class="artwork-image " />
        </div>
        <h1 class="artwork-title ">PILATES</h1>
        <div class="divider "></div>
        <div class="details-section ">
            <p><strong>ACRÍLICA SOBRE TELA, 50 X 70, 2012</strong></p>
            <div class="divider "></div>
            <p class="preco-obra">R$ 3.500,00</p>
            <p class="parcelamento-info">5% À VISTA/ 6 VEZES SEM JUROS</p>
        </div>
        <div class="cta-section ">
            <a href="https://datacanuto.github.io/galeria-digital-artes/catalog_mobile/index.html " class="catalog-button ">
                CATÁLOGO
            </a>
        </div>
        <div style="height: 24px;"></div>
        <a href="https://wa.me/5571999588950" class="whatsapp-button" id="whatsapp-button" target="_blank" rel="noopener noreferrer">FALE COM O MONITOR</a>
    </div>

    <script>
        // Função para registrar interesse pela obra
        function registrarInteresse(item_id, titulo) {
            try {
                // Preparar dados do interesse
                const interesse = {
                    item: item_id,
                    titulo: titulo,
                    timestamp: new Date().toISOString(),
                    url: window.location.href
                };
                
                // Salvar em localStorage
                let interesses = JSON.parse(localStorage.getItem('interesses_obras') || '[]');
                interesses.push(interesse);
                localStorage.setItem('interesses_obras', JSON.stringify(interesses));
                
                // Opcional: Enviar para um servidor (comentado)
                // fetch('/api/registrar-interesse', {
                //     method: 'POST',
                //     headers: { 'Content-Type': 'application/json' },
                //     body: JSON.stringify(interesse)
                // }).catch(err => console.log('Interesse registrado localmente'));
                
                console.log('Interesse registrado:', interesse);
            } catch (error) {
                console.error('Erro ao registrar interesse:', error);
            }
        }

        // Obter ID da obra do caminho da URL
        function obterItemId() {
            const caminho = window.location.pathname;
            const match = caminho.match(/item_(\d+)/);
            return match ? match[1] : null;
        }

        // Event listener para o botão do WhatsApp
        document.getElementById('whatsapp-button').addEventListener('click', function(e) {
            const item_id = obterItemId();
            const titulo = document.querySelector('.artwork-title').innerText || 'obra';
            
            if (item_id) {
                // Registrar interesse antes de abrir o WhatsApp
                registrarInteresse(item_id, titulo);
                
                // Preparar mensagem do WhatsApp com informação da obra
                const mensagem = `Olá! Tenho interesse na obra: "${titulo}" (Item ${item_id})`;
                const whatsappUrl = this.href;
                const novaUrl = whatsappUrl.includes('?text=') 
                    ? whatsappUrl + encodeURIComponent(`\n${mensagem}`)
                    : whatsappUrl + '?text=' + encodeURIComponent(mensagem);
                
                // Atualizar href dinamicamente
                this.href = novaUrl;
            }
        });
    </script>
</body>

</html>